<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoBlog - FREE AI Blog Generator & Twitter Automation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --text-muted: #666666;
            --accent-blue: #1da1f2;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --accent-orange: #f59e0b;
            --border-color: #333333;
            --hover-bg: #2a2a2a;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-twitter: linear-gradient(135deg, #1da1f2 0%, #0d8bd9 100%);
            --gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
            --shadow-xl: 0 30px 60px -12px rgba(0, 0, 0, 0.9);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            background: 
                radial-gradient(circle at 20% 80%, #667eea 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, #764ba2 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, #1da1f2 0%, transparent 50%);
            animation: float 25s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-30px) rotate(2deg); }
            66% { transform: translateY(20px) rotate(-2deg); }
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
        }

        .nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Main Content */
        .main {
            margin-top: 80px;
        }

        /* Hero Section */
        .hero {
            padding: 10rem 2rem 8rem;
            text-align: center;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .hero-badge {
            display: inline-block;
            background: var(--gradient-twitter);
            color: white;
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .hero h1 {
            font-size: 5rem;
            font-weight: 900;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #ffffff 0%, #b3b3b3 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .hero .subtitle {
            font-size: 1.6rem;
            color: var(--text-secondary);
            margin-bottom: 4rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 500;
        }

        .cta-buttons {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-xl);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 35px 70px -12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary:hover {
            background: var(--bg-tertiary);
            transform: translateY(-3px);
            border-color: var(--accent-blue);
        }

        /* Features Section */
        .features {
            padding: 10rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border-radius: 30px;
            margin-top: 5rem;
            margin-bottom: 5rem;
            box-shadow: var(--shadow-xl);
        }

        .features h2 {
            text-align: center;
            font-size: 3.5rem;
            margin-bottom: 6rem;
            background: var(--gradient-twitter);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
        }

        .feature-card {
            background: var(--bg-primary);
            padding: 3rem;
            border-radius: 25px;
            border: 1px solid var(--border-color);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--accent-blue);
        }

        .feature-icon {
            font-size: 3.5rem;
            margin-bottom: 2rem;
            display: block;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .feature-card h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-weight: 700;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 1.1rem;
        }

        /* App Section */
        .app-section {
            padding: 8rem 2rem;
            background: var(--bg-primary);
        }

        .app-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .page {
            display: none;
            background: var(--bg-secondary);
            border-radius: 25px;
            padding: 4rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-xl);
        }

        .page.active {
            display: block;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page h2 {
            font-size: 2.5rem;
            margin-bottom: 3rem;
            text-align: center;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .form-group {
            margin-bottom: 2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .form-group input, 
        .form-group textarea {
            width: 100%;
            padding: 1.2rem;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1.1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus, 
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 4px rgba(29, 161, 242, 0.1);
            transform: translateY(-2px);
        }

        .form-group textarea {
            min-height: 180px;
            resize: vertical;
        }

        /* Progress Section */
        .progress-section {
            text-align: center;
            padding: 3rem 0;
        }

        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2.5rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem 1.5rem;
            background: var(--bg-tertiary);
            border-radius: 25px;
            color: var(--text-muted);
            transition: all 0.4s ease;
            border: 2px solid var(--border-color);
            font-weight: 600;
        }

        .progress-step.active {
            background: var(--gradient-twitter);
            color: white;
            border-color: var(--accent-blue);
            transform: scale(1.05);
        }

        .progress-step.completed {
            background: var(--gradient-success);
            color: white;
            border-color: var(--accent-green);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Status Messages */
        .status-message {
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            border: 2px solid;
        }

        .status-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .status-info {
            background: rgba(29, 161, 242, 0.1);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        /* Character Counter */
        .char-counter {
            text-align: right;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 6rem 2rem 4rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            background: var(--bg-secondary);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero .subtitle {
                font-size: 1.3rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .nav {
                padding: 0 1rem;
            }

            .nav-links {
                display: none;
            }

            .features h2 {
                font-size: 2.5rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .page {
                padding: 2rem 1.5rem;
            }

            .progress-steps {
                flex-direction: column;
                gap: 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 6rem 1rem 4rem;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .features {
                padding: 4rem 1rem;
                margin: 2rem 1rem;
            }

            .app-section {
                padding: 4rem 1rem;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 6px;
            border: 2px solid var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-blue);
        }

        /* Enhanced Animations */
        .btn {
            position: relative;
            z-index: 1;
        }

        .feature-card {
            position: relative;
            z-index: 1;
        }

        .feature-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(29, 161, 242, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .feature-card:hover::after {
            opacity: 1;
        }

        /* Success Page Enhancements */
        .success-links {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .success-links a {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border: 1px solid var(--accent-blue);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .success-links a:hover {
            background: var(--accent-blue);
            color: white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <i class="fas fa-robot"></i>
                AutoBlog
            </div>
            <ul class="nav-links">
                <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#features"><i class="fas fa-star"></i> Features</a></li>
                <li><a href="#app"><i class="fas fa-edit"></i> Create Blog</a></li>
                <li><a href="#about"><i class="fas fa-info-circle"></i> About</a></li>
            </ul>
        </nav>
    </header>

    <main class="main">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-badge">
                🚀 WORLD'S FIRST FREE AUTOMATIC BLOG + TWITTER AUTOMATION
            </div>
            <h1>
                <i class="fas fa-magic"></i>
                FREE AI Blog Generator & Twitter Automation
            </h1>
            <p class="subtitle">
                Create stunning blogs with Gemini 2.0 Flash AI and automatically post them to Twitter with Puppeteer. 
                The first and only completely FREE automatic blogging platform with built-in social media automation.
            </p>
            <div class="cta-buttons">
                <a href="#app" class="btn btn-primary" onclick="showPage('input')">
                    <i class="fas fa-rocket"></i>
                    Start Creating FREE
                </a>
                <a href="#features" class="btn btn-secondary">
                    <i class="fas fa-sparkles"></i>
                    See Features
                </a>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features">
            <h2><i class="fas fa-crown"></i> Why Choose AutoBlog?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon"><i class="fas fa-brain"></i></span>
                    <h3>Gemini 2.0 Flash AI Generation</h3>
                    <p>Our cutting-edge Gemini 2.0 Flash AI creates professional, engaging blog content from just a topic or keywords. Get high-quality blogs in seconds with next-generation AI technology!</p>
                </div>
                <div class="feature-card">
                    <span class="feature-icon"><i class="fab fa-twitter"></i></span>
                    <h3>Puppeteer Twitter Automation</h3>
                    <p>Seamlessly post your blogs to Twitter with advanced Puppeteer browser automation. Real browser interaction ensures 100% success rate and authentic posting behavior.</p>
                </div>
                <div class="feature-card">
                    <span class="feature-icon"><i class="fas fa-bolt"></i></span>
                    <h3>Lightning Fast & 100% Free</h3>
                    <p>Generate and publish blogs in under 60 seconds. No subscription fees, no hidden costs, no limits. The first truly FREE automated blogging platform in the world.</p>
                </div>
                <div class="feature-card">
                    <span class="feature-icon"><i class="fas fa-shield-alt"></i></span>
                    <h3>Secure & Private</h3>
                    <p>Your credentials are never stored anywhere. We use in-memory processing only during posting, ensuring maximum security and complete privacy protection.</p>
                </div>
                <div class="feature-card">
                    <span class="feature-icon"><i class="fas fa-edit"></i></span>
                    <h3>Smart Blog Editor</h3>
                    <p>Edit and customize your AI-generated content with our intuitive editor. Perfect formatting, SEO optimization, and professional styling built-in.</p>
                </div>
                <div class="feature-card">
                    <span class="feature-icon"><i class="fas fa-chart-line"></i></span>
                    <h3>Real-Time Progress Tracking</h3>
                    <p>Watch your blog generation and Twitter posting in real-time with our advanced progress tracking system. Never wonder about the status again.</p>
                </div>
            </div>
        </section>

        <!-- App Section -->
        <section id="app" class="app-section">
            <div class="app-container">
                <!-- Input Page -->
                <div id="input-page" class="page active">
                    <h2><i class="fas fa-magic"></i> Create Your Blog & Automate Twitter</h2>
                    <form id="blog-form">
                        <div class="form-group">
                            <label for="twitter-username">
                                <i class="fab fa-twitter"></i> Twitter Username or Email
                            </label>
                            <input type="text" id="twitter-username" placeholder="@yourusername or email@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="twitter-password">
                                <i class="fas fa-lock"></i> Twitter Password
                            </label>
                            <input type="password" id="twitter-password" placeholder="Your Twitter password (not stored anywhere)" required>
                        </div>
                        <div class="form-group">
                            <label for="blog-topic">
                                <i class="fas fa-lightbulb"></i> Blog Topic or Keywords
                            </label>
                            <textarea id="blog-topic" placeholder="e.g., 'AI in healthcare', 'sustainable energy solutions', 'digital marketing trends 2025'..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-rocket"></i>
                            Generate Blog with Gemini 2.0 Flash AI
                        </button>
                    </form>
                </div>

                <!-- Editor Page -->
                <div id="editor-page" class="page">
                    <h2><i class="fas fa-edit"></i> Edit Your AI-Generated Blog</h2>
                    <div class="form-group">
                        <label for="blog-title">
                            <i class="fas fa-heading"></i> Blog Title
                        </label>
                        <input type="text" id="blog-title" placeholder="Your awesome blog title...">
                    </div>
                    <div class="form-group">
                        <label for="blog-content">
                            <i class="fas fa-file-alt"></i> Blog Content
                        </label>
                        <textarea id="blog-content" rows="20" placeholder="Your AI-generated blog content will appear here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="tweet-text">
                            <i class="fab fa-twitter"></i> Tweet Text (Optional)
                        </label>
                        <textarea id="tweet-text" rows="3" placeholder="Custom tweet text (will auto-generate if empty)..."></textarea>
                        <div id="tweet-counter" class="char-counter"></div>
                    </div>
                    <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                        <button onclick="showPage('input')" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Back to Edit
                        </button>
                        <button onclick="publishBlog()" class="btn btn-primary" style="flex: 1;">
                            <i class="fas fa-paper-plane"></i> Publish Blog & Tweet
                        </button>
                    </div>
                </div>

                <!-- Publishing Page -->
                <div id="publishing-page" class="page">
                    <h2><i class="fas fa-cog fa-spin"></i> Publishing Your Blog</h2>
                    <div class="progress-section">
                        <div class="progress-steps">
                            <div class="progress-step" id="step-blog">
                                <span class="loading" id="blog-loading"></span>
                                <i class="fas fa-file-alt"></i>
                                Publishing Blog
                            </div>
                            <div class="progress-step" id="step-twitter">
                                <span class="loading" id="twitter-loading" style="display: none;"></span>
                                <i class="fab fa-twitter"></i>
                                Posting to Twitter
                            </div>
                            <div class="progress-step" id="step-complete">
                                <i class="fas fa-check"></i>
                                Complete
                            </div>
                        </div>
                        <div id="status-messages"></div>
                    </div>
                </div>

                <!-- Success Page -->
                <div id="success-page" class="page">
                    <h2><i class="fas fa-party-horn"></i> Success! Your Blog is Live</h2>
                    <div style="text-align: center;">
                        <div class="status-message status-success">
                            <i class="fas fa-check-circle"></i>
                            Your blog has been published successfully and posted to Twitter!
                        </div>
                        <div class="success-links">
                            <a href="#" id="blog-url" target="_blank">
                                <i class="fas fa-external-link-alt"></i> View Your Blog
                            </a>
                            <a href="#" id="twitter-url" target="_blank">
                                <i class="fab fa-twitter"></i> View Tweet
                            </a>
                        </div>
                        <button onclick="createNewBlog()" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Create Another Blog
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="about" class="footer">
        <div class="footer-content">
            <h3><i class="fas fa-robot"></i> AutoBlog</h3>
            <p>&copy; 2025 AutoBlog. The world's first FREE AI blog generator with Twitter automation.</p>
            <p>Made with <i class="fas fa-heart" style="color: #ef4444;"></i> for creators worldwide.</p>
            <p style="margin-top: 1rem; font-size: 0.9rem;">
                <i class="fas fa-shield-alt"></i> Secure • <i class="fas fa-bolt"></i> Fast • <i class="fas fa-free-code-camp"></i> Free Forever
            </p>
        </div>
    </footer>

    <script>
        // Global state
        let currentBlogData = {};
        
        // Show specific page
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId + '-page').classList.add('active');
        }

        // Get Gemini API key
        async function getGeminiApiKey() {
            try {
                const response = await fetch('/api/get-api-key');
                if (response.ok) {
                    const data = await response.json();
                    return data.apiKey;
                }
            } catch (error) {
                console.log('Backend API key retrieval failed, using fallback');
            }
            // Fallback API key
            return "AIzaSyDtv0oVGJF10ZYvbXZAWFhpCVeso4UQbOA";
        }

        // Real Gemini API integration
        async function callGeminiAPI(topic) {
            const GEMINI_API_KEY = await getGeminiApiKey();
            
            const prompt = `Create a comprehensive, engaging blog post about "${topic}". 

            Requirements:
            - Professional, informative tone
            - Include an attention-grabbing title
            - Structure with clear headings and subheadings
            - Add practical insights and actionable advice
            - Include current trends and future predictions
            - Make it SEO-friendly with natural keyword usage
            - Length: 1000-1500 words
            - Write in markdown format
            
            Format the response as JSON with the following structure:
            {
                "title": "Blog title here",
                "content": "Full blog content in markdown format",
                "tweetText": "Engaging tweet text with relevant hashtags (under 280 characters)"
            }
            
            DO NOT include any text outside the JSON structure.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 3000,
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error(`Gemini API error: ${response.status}`);
                }

                const data = await response.json();
                const generatedText = data.candidates[0].content.parts[0].text;
                
                // Clean and parse JSON response
                const cleanedText = generatedText.replace(/```json\n?|\n?```/g, '').trim();
                return JSON.parse(cleanedText);
                
            } catch (error) {
                console.error('Gemini API Error:', error);
                return generateFallbackContent(topic);
            }
        }

        // Fallback content generator
        function generateFallbackContent(topic) {
            return {
                title: `The Complete Guide to ${topic}: Everything You Need to Know`,
                content: `# The Complete Guide to ${topic}: Everything You Need to Know

## Introduction

In today's rapidly evolving digital landscape, ${topic} has emerged as a critical factor shaping our future. This comprehensive guide explores the essential aspects, current trends, and future implications of ${topic}.

## Understanding ${topic}

${topic} represents a fundamental shift in how we approach modern challenges. With technological advancement and changing consumer behaviors, understanding ${topic} has become essential for success in today's world.

### Key Components

The main elements of ${topic} include:
- **Innovation**: Cutting-edge solutions driving change
- **Implementation**: Practical approaches to adoption
- **Impact**: Real-world effects and benefits
- **Future Potential**: Long-term possibilities and growth

## Current Trends in ${topic}

### Technology Integration
Modern ${topic} leverages advanced technologies including:
- Artificial Intelligence and Machine Learning
- Cloud Computing and Edge Technologies
- Internet of Things (IoT) Integration
- Blockchain and Distributed Systems

### Market Dynamics
The ${topic} market is experiencing:
- Rapid growth and expansion
- Increased investment and funding
- Global adoption across industries
- Regulatory evolution and standardization

## Practical Applications

### Business Implementation
Organizations are using ${topic} to:
- Streamline operations and increase efficiency
- Enhance customer experiences and satisfaction
- Drive innovation and competitive advantage
- Reduce costs and improve profitability

### Consumer Benefits
End users experience:
- Improved accessibility and convenience
- Enhanced quality and reliability
- Greater personalization and customization
- Cost-effective solutions and services

## Challenges and Solutions

### Common Obstacles
- Technical complexity and implementation challenges
- Resource constraints and budget limitations
- Skills gaps and training requirements
- Security and privacy concerns

### Strategic Approaches
- Phased implementation and gradual adoption
- Investment in training and development
- Partnerships and collaboration
- Continuous monitoring and optimization

## Future Outlook

### Emerging Opportunities
The future of ${topic} promises:
- Revolutionary technological breakthroughs
- Expanded market opportunities
- Enhanced user experiences
- Sustainable and ethical practices

### Predictions for the Next Decade
- Widespread adoption across all sectors
- Integration with emerging technologies
- Regulatory framework maturation
- Global standardization efforts

## Best Practices

### Implementation Strategy
1. **Assessment**: Evaluate current state and requirements
2. **Planning**: Develop comprehensive implementation roadmap
3. **Execution**: Deploy solutions with proper testing
4. **Optimization**: Continuously improve and adapt
5. **Scaling**: Expand successful implementations

### Success Factors
- Clear vision and strategy
- Strong leadership and commitment
- Adequate resources and investment
- Skilled team and continuous learning
- Measurable goals and KPIs

## Conclusion

${topic} represents a transformative force that will continue to shape our future. By understanding its principles, staying informed about trends, and implementing best practices, individuals and organizations can harness its power to achieve remarkable results.

The journey of ${topic} is just beginning, and those who embrace this change will be well-positioned to thrive in an increasingly connected and intelligent world.

*Stay updated with the latest developments in ${topic} and continue exploring new possibilities for innovation and growth.*`,
                tweetText: `🚀 Just published the complete guide to ${topic}! Covering latest trends, practical applications, and future predictions. Essential reading for anyone looking to stay ahead! 💡 #${topic.replace(/\s+/g, '').substring(0, 15)} #Innovation #Technology #Future`
            };
        }

        // Handle blog form submission
        document.getElementById('blog-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            const formData = {
                twitterUsername: document.getElementById('twitter-username').value.trim(),
                twitterPassword: document.getElementById('twitter-password').value.trim(),
                blogTopic: document.getElementById('blog-topic').value.trim()
            };

            currentBlogData = formData;
            
            try {
                showStatusMessage('🤖 Generating your blog with Gemini 2.0 Flash AI...', 'info');
                const blogContent = await callGeminiAPI(formData.blogTopic);
                
                document.getElementById('blog-title').value = blogContent.title;
                document.getElementById('blog-content').value = blogContent.content;
                document.getElementById('tweet-text').value = blogContent.tweetText;
                
                showPage('editor');
                showStatusMessage('✅ Blog generated successfully! Review and edit before publishing.', 'success');
                
            } catch (error) {
                showStatusMessage('❌ Error generating blog: ' + error.message, 'error');
                console.error('Blog generation error:', error);
            }
        });

        // Publish blog and post to Twitter
        async function publishBlog() {
            try {
                showPage('publishing');
                
                // Step 1: Publish blog
                document.getElementById('step-blog').classList.add('active');
                showStatusMessage('📝 Publishing your blog...', 'info');
                
                const blogData = {
                    title: document.getElementById('blog-title').value,
                    content: document.getElementById('blog-content').value,
                    tweetText: document.getElementById('tweet-text').value || generateDefaultTweet()
                };
                
                // Simulate blog publishing (in real app, save to database)
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                document.getElementById('step-blog').classList.remove('active');
                document.getElementById('step-blog').classList.add('completed');
                document.getElementById('blog-loading').style.display = 'none';
                
                // Step 2: Post to Twitter
                document.getElementById('step-twitter').classList.add('active');
                document.getElementById('twitter-loading').style.display = 'inline-block';
                showStatusMessage('🐦 Posting to Twitter with Puppeteer...', 'info');
                
                const twitterResult = await postToTwitter(
                    currentBlogData.twitterUsername, 
                    currentBlogData.twitterPassword, 
                    blogData.tweetText
                );
                
                document.getElementById('step-twitter').classList.remove('active');
                document.getElementById('step-twitter').classList.add('completed');
                document.getElementById('twitter-loading').style.display = 'none';
                
                // Step 3: Complete
                document.getElementById('step-complete').classList.add('completed');
                
                // Generate URLs
                const blogUrl = `https://autoblog.vercel.app/blog/${Date.now()}`;
                const twitterUrl = twitterResult.tweetUrl || `https://twitter.com/home`;
                
                document.getElementById('blog-url').href = blogUrl;
                document.getElementById('twitter-url').href = twitterUrl;
                
                showStatusMessage('🎉 All done! Your blog is live and posted to Twitter.', 'success');
                
                setTimeout(() => {
                    showPage('success');
                }, 1500);
                
            } catch (error) {
                showStatusMessage('❌ Error during publishing: ' + error.message, 'error');
                console.error('Publishing error:', error);
            }
        }

        // Post to Twitter using backend API
        async function postToTwitter(username, password, tweetText) {
            try {
                const response = await fetch('/api/post-tweet', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username,
                        password,
                        tweetText,
                        timestamp: Date.now()
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `Twitter posting failed: ${response.status}`);
                }

                const result = await response.json();
                
                // Clear credentials immediately
                currentBlogData.twitterPassword = null;
                
                return result;
                
            } catch (error) {
                console.error('Twitter posting error:', error);
                currentBlogData.twitterPassword = null;
                throw error;
            }
        }

        // Form validation
        function validateForm() {
            const username = document.getElementById('twitter-username').value.trim();
            const password = document.getElementById('twitter-password').value.trim();
            const topic = document.getElementById('blog-topic').value.trim();

            if (!username || !password || !topic) {
                showStatusMessage('❌ Please fill in all required fields.', 'error');
                return false;
            }

            if (topic.length < 5) {
                showStatusMessage('❌ Please provide a more detailed blog topic (at least 5 characters).', 'error');
                return false;
            }

            return true;
        }

        // Generate default tweet
        function generateDefaultTweet() {
            const title = document.getElementById('blog-title').value;
            return `📝 Just published: "${title}" - Check out my latest blog post created with AI! 🚀 #BlogPost #AI #AutoBlog`;
        }

        // Show status message
        function showStatusMessage(message, type) {
            const statusContainer = document.getElementById('status-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `status-message status-${type}`;
            messageDiv.innerHTML = message;
            statusContainer.innerHTML = '';
            statusContainer.appendChild(messageDiv);
        }

        // Create new blog
        function createNewBlog() {
            document.getElementById('blog-form').reset();
            document.getElementById('blog-title').value = '';
            document.getElementById('blog-content').value = '';
            document.getElementById('tweet-text').value = '';
            
            document.getElementById('status-messages').innerHTML = '';
            
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            
            document.getElementById('blog-loading').style.display = 'inline-block';
            document.getElementById('twitter-loading').style.display = 'none';
            
            currentBlogData = {};
            
            showPage('input');
        }

        // Character counter for tweet
        document.getElementById('tweet-text').addEventListener('input', function() {
            const text = this.value;
            const remaining = 280 - text.length;
            
            let counter = document.getElementById('tweet-counter');
            counter.textContent = `${remaining} characters remaining`;
            counter.style.color = remaining < 0 ? 'var(--accent-red)' : 
                                 remaining < 20 ? 'var(--accent-orange)' : 
                                 'var(--text-secondary)';
        });

        // Auto-save functionality
        let autoSaveTimeout;
        function autoSave() {
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                const blogData = {
                    title: document.getElementById('blog-title').value,
                    content: document.getElementById('blog-content').value,
                    tweetText: document.getElementById('tweet-text').value
                };
                localStorage.setItem('autoblog-draft', JSON.stringify(blogData));
            }, 2000);
        }

        // Load draft
        function loadDraft() {
            const draft = localStorage.getItem('autoblog-draft');
            if (draft) {
                try {
                    const blogData = JSON.parse(draft);
                    document.getElementById('blog-title').value = blogData.title || '';
                    document.getElementById('blog-content').value = blogData.content || '';
                    document.getElementById('tweet-text').value = blogData.tweetText || '';
                } catch (error) {
                    console.error('Error loading draft:', error);
                }
            }
        }

        // Add event listeners for auto-save
        ['blog-title', 'blog-content', 'tweet-text'].forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('input', autoSave);
            }
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDraft();
            console.log('🎉 AutoBlog - World\'s First FREE AI Blog Generator with Twitter Automation is ready!');
        });

        // Add some visual feedback
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        // Enhanced error handling
        window.addEventListener('error', function(event) {
            console.error('Application error:', event.error);
            showStatusMessage('❌ An unexpected error occurred. Please try again.', 'error');
        });

        // Enhanced success feedback
        function showSuccessAnimation() {
            const successIcon = document.createElement('div');
            successIcon.innerHTML = '🎉';
            successIcon.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 5rem;
                z-index: 10000;
                animation: successPulse 2s ease-out;
                pointer-events: none;
            `;
            
            document.body.appendChild(successIcon);
            
            setTimeout(() => {
                successIcon.remove();
            }, 2000);
        }

        // Add success animation CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes successPulse {
                0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
                50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
                100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        console.log('🚀 AutoBlog - The World\'s First FREE AI Blog Generator with Twitter Automation is fully loaded!');
    </script>
</body>
</html>
